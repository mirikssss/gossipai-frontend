from pydantic import BaseModel
from typing import Optional, List, Dict, Any
from datetime import datetime

class AnalysisCard(BaseModel):
    id: str
    name: str
    icon: str
    description: str

class Preset(BaseModel):
    id: str
    name: str
    description: str
    icon: str
    color: str
    target_audience: str
    report_style: List[str]
    focus_analysis: List[str]
    temperature: float
    custom_cards: List[AnalysisCard] = []

# Standard cards that appear for all presets
STANDARD_CARDS = [
    AnalysisCard(
        id="summary",
        name="ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ",
        icon="ðŸ“",
        description="ÐžÐ±Ñ‰Ð¸Ð¹ Ð¾Ð±Ð·Ð¾Ñ€ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð°"
    ),
    AnalysisCard(
        id="ai_judge",
        name="Ð˜Ð˜-ÑÑƒÐ´ÑŒÑ",
        icon="âš–ï¸",
        description="ÐžÐ±ÑŠÐµÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð¾Ñ†ÐµÐ½ÐºÐ° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ"
    ),
    AnalysisCard(
        id="emotion_timeline",
        name="Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ ÑˆÐºÐ°Ð»Ð° ÑÐ¼Ð¾Ñ†Ð¸Ð¹",
        icon="ðŸ“ˆ",
        description="ÐšÐ°Ðº Ð¼ÐµÐ½ÑÐ»Ð¸ÑÑŒ ÑÐ¼Ð¾Ñ†Ð¸Ð¸ Ð² Ñ…Ð¾Ð´Ðµ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð°"
    ),
    AnalysisCard(
        id="ai_chatbot",
        name="Ð˜Ð˜-Ñ‡Ð°Ñ‚Ð±Ð¾Ñ‚",
        icon="ðŸ¤–",
        description="Ð—Ð°Ð´Ð°Ð¹Ñ‚Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¾Ð± Ð°Ð½Ð°Ð»Ð¸Ð·Ðµ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð°"
    ),
    AnalysisCard(
        id="suggested_responses",
        name="ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹",
        icon="ðŸ’¡",
        description="ÐšÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ðµ Ñ„Ñ€Ð°Ð·Ñ‹ Ð´Ð»Ñ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ"
    )
]

# Default preset - uses current settings
DEFAULT_PRESET = Preset(
    id="default",
    name="Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹",
    description="Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð· Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð¾Ð² Ñ Ð±Ð°Ð»Ð°Ð½ÑÐ¾Ð¼ ÑÐ¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¸ Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…",
    icon="ðŸ”",
    color="neon-blue",
    target_audience="Ð’ÑÐµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸",
    report_style=["Ð¡Ð±Ð°Ð»Ð°Ð½ÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ñ‚Ð¾Ð½", "Ð¤Ð°ÐºÑ‚Ñ‹ Ð¸ ÑÐ¼Ð¾Ñ†Ð¸Ð¸"],
    focus_analysis=["ÐžÐ±Ñ‰Ð¸Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð·", "Ð­Ð¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð°Ñ Ð´Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ°", "Ð¡ÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ ÑÐ¼Ñ‹ÑÐ»Ñ‹"],
    temperature=0.7,
    custom_cards=[]
)

# Teen Navigator preset
TEEN_NAVIGATOR_PRESET = Preset(
    id="teen_navigator",
    name="ÐŸÐ¾Ð´Ñ€Ð¾ÑÑ‚ÐºÐ¾Ð²Ñ‹Ð¹ ÐÐ°Ð²Ð¸Ð³Ð°Ñ‚Ð¾Ñ€",
    description="Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð· Ð¿Ð¾Ð´Ñ€Ð¾ÑÑ‚ÐºÐ¾Ð²Ð¾Ð¹ ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ñ Ñ„Ð¾ÐºÑƒÑÐ¾Ð¼ Ð½Ð° ÑÐ¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½ÑƒÑŽ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ, Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ðµ Ñ‚Ð¾ÐºÑÐ¸Ñ‡Ð½Ñ‹Ñ… Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ð¾Ð² Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÑƒ Ð·Ð´Ð¾Ñ€Ð¾Ð²Ñ‹Ñ… Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ð¹",
    icon="ðŸš€",
    color="neon-purple",
    target_audience="ÐŸÐ¾Ð´Ñ€Ð¾ÑÑ‚ÐºÐ¸, Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»Ð¸ Ð¿Ð¾Ð´Ñ€Ð¾ÑÑ‚ÐºÐ¾Ð², ÑˆÐºÐ¾Ð»ÑŒÐ½Ñ‹Ðµ Ð¿ÑÐ¸Ñ…Ð¾Ð»Ð¾Ð³Ð¸",
    report_style=["Ð¡Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ð¸ Ð½ÐµÑ„Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ·Ñ‹Ðº", "ÐÐºÑ‚Ð¸Ð²Ð½Ð¾Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐ¼Ð¾Ð´Ð·Ð¸ Ð¸ Ð²Ð¸Ð·ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ñ… ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²", 
                 "ÐšÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ðµ, Ð»ÐµÐ³ÐºÐ¾ ÑƒÑÐ²Ð°Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ðµ Ð°Ð±Ð·Ð°Ñ†Ñ‹", "Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¸ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ 'ÐºÐ°Ðº Ð±Ñ‹ Ñ‚Ñ‹ Ð¿Ð¾ÑÑ‚ÑƒÐ¿Ð¸Ð»?'"],
    focus_analysis=["Ð’Ñ‹ÑÐ²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð·Ð½Ð°ÐºÐ¾Ð² Ð´Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¸Ð»Ð¸ Ð±ÑƒÐ»Ð»Ð¸Ð½Ð³Ð°", "ÐÐ½Ð°Ð»Ð¸Ð· Ð³Ñ€ÑƒÐ¿Ð¿Ð¾Ð²Ð¾Ð¹ Ð´Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ¸", 
                   "Ð Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ðµ ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ñ… ÑÐ¼Ð¾Ñ†Ð¸Ð¹ Ð¸ Ð½ÐµÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸", "ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð·Ð´Ð¾Ñ€Ð¾Ð²Ñ‹Ñ… Ð¸ Ð½ÐµÐ·Ð´Ð¾Ñ€Ð¾Ð²Ñ‹Ñ… ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ð¾Ð²"],
    temperature=0.85,
    custom_cards=[
        AnalysisCard(
            id="safety_check",
            name="ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸",
            icon="ðŸ›¡ï¸",
            description="Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñ‹ Ð±ÑƒÐ»Ð»Ð¸Ð½Ð³Ð° Ð¸Ð»Ð¸ Ð´Ð°Ð²Ð»ÐµÐ½Ð¸Ñ, ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ ÑÐ¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸ ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¸, Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð·Ð°Ñ‰Ð¸Ñ‚Ðµ Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ð³Ñ€Ð°Ð½Ð¸Ñ†"
        ),
        AnalysisCard(
            id="emotion_dictionary",
            name="Ð¡Ð»Ð¾Ð²Ð°Ñ€ÑŒ ÑÐ¼Ð¾Ñ†Ð¸Ð¹",
            icon="ðŸ§ ",
            description="Ð Ð°ÑÑˆÐ¸Ñ„Ñ€Ð¾Ð²ÐºÐ° ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ñ… ÑÐ¼Ð¾Ñ†Ð¸Ð¹ Ð² Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ñ… Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ñ…, Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸Ð· Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ð° Ñ Ð¾Ð±ÑŠÑÑÐ½ÐµÐ½Ð¸ÐµÐ¼ Ð¿Ð¾Ð´Ñ‚ÐµÐºÑÑ‚Ð°, Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ 'Ð£Ð³Ð°Ð´Ð°Ð¹ ÑÐ¼Ð¾Ñ†Ð¸ÑŽ'"
        ),
        AnalysisCard(
            id="social_compass",
            name="Ð¡Ð¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ¾Ð¼Ð¿Ð°Ñ",
            icon="ðŸ§­",
            description="ÐÐ½Ð°Ð»Ð¸Ð· Ð³Ñ€ÑƒÐ¿Ð¿Ð¾Ð²Ð¾Ð¹ Ð´Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ¸, Ð²Ñ‹ÑÐ²Ð»ÐµÐ½Ð¸Ðµ 'Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ñ… ÐºÑ€ÑƒÐ³Ð¾Ð²' Ð¸ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¹, ÑÐ¾Ð²ÐµÑ‚Ñ‹ Ð¿Ð¾ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ Ð² ÑÐ¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ñ… ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸ÑÑ…"
        )
    ]
)

# Family Balance preset
FAMILY_BALANCE_PRESET = Preset(
    id="family_balance",
    name="Ð¡ÐµÐ¼ÐµÐ¹Ð½Ñ‹Ð¹ Ð‘Ð°Ð»Ð°Ð½Ñ",
    description="Ð“Ð»ÑƒÐ±Ð¾ÐºÐ¸Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð· ÑÐµÐ¼ÐµÐ¹Ð½Ð¾Ð¹ ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ñ Ñ„Ð¾ÐºÑƒÑÐ¾Ð¼ Ð½Ð° Ð±Ð°Ð»Ð°Ð½Ñ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð²ÑÐµÑ… Ñ‡Ð»ÐµÐ½Ð¾Ð² ÑÐµÐ¼ÑŒÐ¸, Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ð¾Ð² Ð¸ Ñ†Ð¸ÐºÐ»Ð¾Ð²",
    icon="ðŸ¡",
    color="neon-turquoise",
    target_audience="ÐŸÐ°Ñ€Ñ‹, ÑÐµÐ¼ÑŒÐ¸ Ñ Ð´ÐµÑ‚ÑŒÐ¼Ð¸, ÑÐµÐ¼ÐµÐ¹Ð½Ñ‹Ðµ Ñ‚ÐµÑ€Ð°Ð¿ÐµÐ²Ñ‚Ñ‹",
    report_style=["Ð¢ÐµÐ¿Ð»Ñ‹Ð¹, Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÑŽÑ‰Ð¸Ð¹ Ñ‚Ð¾Ð½", "Ð¡Ð±Ð°Ð»Ð°Ð½ÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ðº Ð¿ÐµÑ€ÑÐ¿ÐµÐºÑ‚Ð¸Ð²Ð°Ð¼ Ð²ÑÐµÑ… ÑÑ‚Ð¾Ñ€Ð¾Ð½", 
                "ÐÐºÑ†ÐµÐ½Ñ‚ Ð½Ð° Ñ€ÐµÑˆÐµÐ½Ð¸ÑÑ…, Ð° Ð½Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ñ…", "ÐŸÑ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¸ ÑƒÐ¿Ñ€Ð°Ð¶Ð½ÐµÐ½Ð¸Ñ"],
    focus_analysis=["Ð¦Ð¸ÐºÐ»Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ñ‹ ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¸", "Ð‘Ð°Ð»Ð°Ð½Ñ Ð±Ð»Ð¸Ð·Ð¾ÑÑ‚Ð¸ Ð¸ Ð°Ð²Ñ‚Ð¾Ð½Ð¾Ð¼Ð¸Ð¸", 
                   "Ð’Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸ Ð¿Ñ€Ð¸Ð½ÑÑ‚Ð¸Ðµ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÐµÐ¹", "Ð Ð¾Ð»ÐµÐ²Ñ‹Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð² ÑÐµÐ¼ÐµÐ¹Ð½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ", "ÐÐµÐ²Ñ‹ÑÐºÐ°Ð·Ð°Ð½Ð½Ñ‹Ðµ Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ñ"],
    temperature=0.7,
    custom_cards=[
        AnalysisCard(
            id="communication_cycles",
            name="ÐšÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ†Ð¸ÐºÐ»Ñ‹",
            icon="ðŸ”„",
            description="Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰Ð¸Ñ…ÑÑ Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ð¾Ð² ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¸, Ñ‚Ð¾Ñ‡ÐºÐ¸ Ñ‚Ñ€Ð¸Ð³Ð³ÐµÑ€Ð° Ð¸ ÑÑÐºÐ°Ð»Ð°Ñ†Ð¸Ð¸, ÑÐ¿Ð¾ÑÐ¾Ð±Ñ‹ Ð¿Ñ€ÐµÑ€Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð½ÐµÐ³Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… Ñ†Ð¸ÐºÐ»Ð¾Ð²"
        ),
        AnalysisCard(
            id="needs_map",
            name="ÐšÐ°Ñ€Ñ‚Ð° Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÐµÐ¹",
            icon="â¤ï¸",
            description="ÐÐ½Ð°Ð»Ð¸Ð· Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð½Ñ‹Ñ… Ð¸ Ð½ÐµÐ²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÐµÐ¹ ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñ‹, Ð·Ð¾Ð½Ñ‹ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ñ Ð¸ Ñ€Ð°ÑÑ…Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÐµÐ¹, Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑŽ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚ÐµÐ¹"
        ),
        AnalysisCard(
            id="family_roles",
            name="Ð¡ÐµÐ¼ÐµÐ¹Ð½Ñ‹Ðµ Ñ€Ð¾Ð»Ð¸",
            icon="ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",
            description="ÐÐ½Ð°Ð»Ð¸Ð· Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ Ñ€Ð¾Ð»ÐµÐ¹ Ð² ÑÐµÐ¼ÐµÐ¹Ð½Ð¾Ð¹ Ð´Ð¸Ð½Ð°Ð¼Ð¸ÐºÐµ, Ð±Ð°Ð»Ð°Ð½Ñ Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð¸ Ð¿Ñ€Ð¸Ð½ÑÑ‚Ð¸Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹, Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð³Ð°Ñ€Ð¼Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ€Ð¾Ð»ÐµÐ¹"
        )
    ]
)

# Strategic HR preset
STRATEGIC_HR_PRESET = Preset(
    id="strategic_hr",
    name="Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ HR",
    description="ÐŸÑ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð· Ð´ÐµÐ»Ð¾Ð²Ð¾Ð¹ ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ð´Ð»Ñ HR-ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚Ð¾Ð² Ñ Ñ„Ð¾ÐºÑƒÑÐ¾Ð¼ Ð½Ð° ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½ÑƒÑŽ Ð´Ð¸Ð½Ð°Ð¼Ð¸ÐºÑƒ, Ð»Ð¸Ð´ÐµÑ€ÑÑ‚Ð²Ð¾, Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ñ€Ð¾Ð»ÐµÐ¹",
    icon="ðŸ“Š",
    color="neon-blue",
    target_audience="HR-Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð°, Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ñ‹, Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´",
    report_style=["ÐŸÑ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹, Ð´ÐµÐ»Ð¾Ð²Ð¾Ð¹ Ñ‚Ð¾Ð½", "ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ Ð¸ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸", 
                "Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ñ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ð¼Ð¸ Ð²Ñ‹Ð²Ð¾Ð´Ð°Ð¼Ð¸", "Ð¡Ð¾Ð¿Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ Ð»ÑƒÑ‡ÑˆÐ¸Ð¼Ð¸ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ°Ð¼Ð¸"],
    focus_analysis=["ÐšÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð»Ð¸Ð´ÐµÑ€ÑÑ‚Ð²Ð° Ð¸ Ð´ÐµÐ»ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ", "Ð’Ð¾Ð²Ð»ÐµÑ‡ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ Ñ‡Ð»ÐµÐ½Ð¾Ð² ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹", 
                   "Ð­Ñ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¸Ð½ÑÑ‚Ð¸Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹", "ÐŸÑÐ¸Ñ…Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ð² ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ", "ÐšÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ð±Ð°Ñ€ÑŒÐµÑ€Ñ‹"],
    temperature=0.5,
    custom_cards=[
        AnalysisCard(
            id="team_analytics",
            name="ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°Ñ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°",
            icon="ðŸ“‹",
            description="ÐšÐ²Ð°Ð½Ñ‚Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸ ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¸, Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð³Ð¾Ð²Ð¾Ñ€ÐµÐ½Ð¸Ñ/ÑƒÑ‡Ð°ÑÑ‚Ð¸Ñ, ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ Ñ†ÐµÐ»ÐµÐ¹ Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ"
        ),
        AnalysisCard(
            id="psychological_safety",
            name="ÐŸÑÐ¸Ñ…Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ",
            icon="ðŸŒ±",
            description="Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ Ð¿ÑÐ¸Ñ…Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸ Ð² ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ, Ð°Ð½Ð°Ð»Ð¸Ð· Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¾ÑÑ‚Ð¸ Ð¸ Ð´Ð¾Ð²ÐµÑ€Ð¸Ñ Ð² ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¸"
        ),
        AnalysisCard(
            id="professional_growth",
            name="ÐŸÑ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€Ð¾ÑÑ‚",
            icon="ðŸ“ˆ",
            description="ÐÐ½Ð°Ð»Ð¸Ð· ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… Ð½Ð°Ð²Ñ‹ÐºÐ¾Ð² Ñ‡Ð»ÐµÐ½Ð¾Ð² ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹, Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ð´Ð»Ñ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ, Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸ÑŽ"
        )
    ]
)

# List of all available presets
ALL_PRESETS = [
    DEFAULT_PRESET,
    TEEN_NAVIGATOR_PRESET,
    FAMILY_BALANCE_PRESET,
    STRATEGIC_HR_PRESET
]

# Get preset by ID
def get_preset_by_id(preset_id: str) -> Optional[Preset]:
    for preset in ALL_PRESETS:
        if preset.id == preset_id:
            return preset
    return DEFAULT_PRESET

# Pydantic models for API requests/responses
class PresetCreate(BaseModel):
    name: str
    description: str
    icon: str
    color: str
    target_audience: str
    report_style: List[str]
    focus_analysis: List[str]
    temperature: float
    custom_cards: List[AnalysisCard] = []

class PresetUpdate(BaseModel):
    name: Optional[str] = None
    description: Optional[str] = None
    icon: Optional[str] = None
    color: Optional[str] = None
    target_audience: Optional[str] = None
    report_style: Optional[List[str]] = None
    focus_analysis: Optional[List[str]] = None
    temperature: Optional[float] = None
    custom_cards: Optional[List[AnalysisCard]] = None